# Web Gallery

Небольшая PHP‑галерея: на главной видна сетка миниатюр с пагинацией и статистикой, отдельная страница отвечает за загрузку изображений (JPG/PNG), создание миниатюры, наложение водяного знака и запись метаданных.

## Особенности
- **Миниатюры + модальное окно.** При клике изображение раскрывается в модалке; миниатюры всегда полностью помещаются, модальное окно закрывается по клику/ESC.
- **Метаданные в JSON.** Вся информация лежит в `data/metadata.json`, поэтому не нужна база данных.
- **Минималистичный интерфейс.** Весь стиль описан в `style.css`, JavaScript — только для работы модального окна (`modal.js`).
- **Водяной знак и дата.** При загрузке оригинал получает PNG-водяной знак, а миниатюра — подпись с датой/временем.

## Требования
- PHP 8.1+ с расширением GD (JPEG + PNG).
- Права на запись в каталоги `full/`, `thumbnails/` и файл `data/metadata.json`.
- Любой веб‑сервер, способный исполнять PHP (Apache, Nginx, встроенный `php -S` и т.п.).

## Запуск
```bash
git clone <repo-url>
cd web_gallery
php -S localhost:8080
```

После запуска:
- `http://localhost:8080/index.php` — главная галерея.
- `http://localhost:8080/upload.php` — форма загрузки.

> Если используете Apache/Nginx, просто направьте корень сайта на папку проекта и убедитесь, что PHP имеет доступ на запись.

## Структура каталога
```
├─ data/           # metadata.json (заполняется автоматически)
├─ full/           # оригиналы изображений
├─ thumbnails/     # миниатюры с датой
├─ fonts/          # TTF для рендеринга текста на миниатюрах
├─ watermark/      # PNG-файл водяного знака
├─ index.php       # главная страница (галерея)
├─ upload.php      # загрузка изображений
├─ style.css       # весь CSS интерфейса
├─ modal.js        # логика модального окна
└─ README.md
```

## Процесс загрузки
1. Пользователь открывает `/upload.php`.
2. Скрипт проверяет расширение и размер (до 5 МБ, JPG/PNG).
3. Файл переезжает в `full/`, создаётся миниатюра в `thumbnails/`, поверх оригинала — водяной знак.
4. В `data/metadata.json` добавляется запись с путями, описанием и датой.

## Кастомизация
- Настройки (разрешённые расширения, размеры, путь к водяному знаку) находятся в начале `upload.php`.
- Стили правятся напрямую в `style.css`.
- Поведение модального окна — в `modal.js`.

## Полезные советы
- Перед деплоем убедитесь, что PHP и GD собраны с поддержкой TrueType (`imagettftext`) и PNG.
- При изменении прав назначьте веб‑серверу возможность писать в `full/`, `thumbnails/` и `data/metadata.json`, иначе загрузка завершится ошибкой.
- Для резервного копирования достаточно забрать `data/metadata.json` и папки `full/`/`thumbnails/`.

Галерею можно развернуть на любом простом хостинге: требуется только PHP и GD. При необходимости расширяйте функциональность (теги, фильтры, авторизацию) поверх существующей структуры.
